## GAS: Google Actions Server

A Node.js server for your Google Actions/Home

### Get it

NPM: `npm i -S @manekinekko/google-actions-server`

YARN: `yarn add @manekinekko/google-actions-server`

### Use it

Here is a quick guide in order to use this server:

```javascript
import { ActionServer } from '@manekinekko/google-actions-server';

const server = new ActionServer();

server.welcome((assistant) => {
  let inputPrompt = assistant.buildInputPrompt(true, 'Hello Home');
  assistant.ask(inputPrompt, state);
});

server.intent(ActionServer.intent.action.TEXT, (assistant, /*state*/ ) => {
  // valid intents are:
  // - ActionServer.intent.action.MAIN
  // - ActionServer.intent.action.TEXT
  // - ActionServer.intent.action.PERMISSION

  // ask the user and listen for an anwser
  //assistant.ask();

  // reads the user's answer
  //assistant.getRawInput();

  // tell something to the user and stop listening
  //assistant.tell();

})
    
// start listening for commands
server.listen();

```

In your action project, make sure to have a `action.json` file:

```json
{
    "versionLabel": "1.0.0",
    "agentInfo": {
        "languageCode": "en-US",
        "projectId": "<YOUR ACTION NAME HERE>",
        "voiceName": "female_2"
    },
    "actions": [{
        "initialTrigger": {
            "intent": "assistant.intent.action.MAIN"
        },
        "httpExecution": {
            "url": "<PUBLIC URL GENERATED BY NGROK>"
        }
    }]
}
```

And in your `package.json` :


```json
"scripts": {
    "start": "npm run build && nodemon dist/action.js",
    "ngrok": "ngrok http 8080",
    "build": "babel lib -d dist",
    "simulator": "gactions simulate",
    "preview": "gactions preview --action_package action.json --invocation_name '<YOUR ACTION NAME HERE>' --preview_mins 1234"
},
```

1. run `npm run ngrok`, and copy the HTTPS generated URL,
2. update `httpExecution.url` in `actions.json` with this URL,
3. run `npm run preview`, and follow the instructions on the terminal,
4. run npm start
5. run `npm run simulator` to start the simulator in CLI mode
6. talk to your `<YOUR ACTION NAME HERE>`

## Note

The current implementation is still a POC. It's obviously missing lots of features. Please open issues to discuss any feature you want to be added, submit suggestions, or anything else...


